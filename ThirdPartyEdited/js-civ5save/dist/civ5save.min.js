!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.Civ5Save=t():e.Civ5Save=t()}(window,(function(){return function(e){var t={};function i(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,i),s.l=!0,s.exports}return i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)i.d(n,s,function(t){return e[t]}.bind(null,s));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=0)}([function(e,t,i){"use strict";i.r(t);class n extends DataView{getString(e,t){if("function"==typeof TextDecoder)return(new TextDecoder).decode(this.buffer.slice(e,e+t));{let i=String.fromCharCode.apply(null,new Uint8Array(this.buffer.slice(e,e+t)));return decodeURIComponent(escape(i))}}}var s={fileSignature:{byteOffsetInSection:0,length:4,sectionByBuild:{98650:1},type:"string",getSection:()=>1},saveGameVersion:{byteOffsetInSection:4,length:4,sectionByBuild:{98650:1},type:"int",getSection:()=>1},gameVersion:{byteOffsetInSection:8,length:null,sectionByBuild:{230620:1},type:"string",getSection:e=>e>=7?1:null},gameBuild:{byteOffsetInSection:null,length:null,sectionByBuild:{230620:1},type:"string",getSection:e=>e>=7?1:null},currentTurn:{byteOffsetInSection:null,length:4,sectionByBuild:{98650:1},type:"int"},gameMode:{byteOffsetInSection:null,length:1,sectionByBuild:{98650:1},type:"int",values:["Single player","Multiplayer","Hotseat"]},player1Civilization:{byteOffsetInSection:null,length:null,sectionByBuild:{98650:1},type:"string"},difficulty:{byteOffsetInSection:null,length:null,sectionByBuild:{98650:1},type:"string"},startingEra:{byteOffsetInSection:null,length:null,sectionByBuild:{98650:1},type:"string"},currentEra:{byteOffsetInSection:null,length:null,sectionByBuild:{98650:1},type:"string"},gamePace:{byteOffsetInSection:null,length:null,sectionByBuild:{98650:1},type:"string"},mapSize:{byteOffsetInSection:null,length:null,sectionByBuild:{98650:1},type:"string"},mapFile:{byteOffsetInSection:null,length:null,sectionByBuild:{98650:1},type:"string"},enabledDLC:{byteOffsetInSection:null,length:null,sectionByBuild:{98650:1},type:"dlcStringArray"},enabledMods:{byteOffsetInSection:null,length:null,sectionByBuild:{98650:1},type:"modsStringArray"},playerStatuses:{byteOffsetInSection:4,length:64,sectionByBuild:{98650:4},type:"intArray",values:["","AI","Dead","Human","None"]},playerCivilizations:{byteOffsetInSection:4,length:64,sectionByBuild:{310700:8},type:"stringArray"},section19SkipPlayer1Leader:{byteOffsetInSection:4,length:null,sectionByBuild:{98650:17,262623:18,395070:19},type:"string"},section19Skip1:{byteOffsetInSection:null,length:252,sectionByBuild:{98650:17,262623:18,395070:19},type:"bytes"},section19SkipSavePath:{byteOffsetInSection:null,length:null,sectionByBuild:{98650:17,262623:18,395070:19},type:"string"},section19SkipUsername:{byteOffsetInSection:null,length:null,sectionByBuild:{98650:17,262623:18,395070:19},type:"string"},section19Skip2:{byteOffsetInSection:null,length:7,sectionByBuild:{98650:17,262623:18,395070:19},type:"bytes"},section19Map:{byteOffsetInSection:null,length:null,sectionByBuild:{98650:17,262623:18,395070:19},type:"string"},section19Skip3:{byteOffsetInSection:null,length:4,sectionByBuild:{98650:17,262623:18,395070:19},type:"bytes"},maxTurns:{byteOffsetInSection:null,length:4,sectionByBuild:{98650:17,262623:18,395070:19},type:"int"},playerNames2:{byteOffsetInSection:4,length:64,sectionByBuild:{98650:21,262623:22,395070:23},type:"stringArray"},section23Skip1:{byteOffsetInSection:null,length:4,sectionByBuild:{98650:21,262623:22,395070:23},type:"int"},turnTimerLength:{byteOffsetInSection:null,length:4,sectionByBuild:{98650:21,262623:22,395070:23},type:"int"},playerColours:{byteOffsetInSection:4,length:64,sectionByBuild:{310700:24,395070:25},type:"stringArray"},privateGame:{byteOffsetInSection:null,length:1,sectionByBuild:{310700:24,395070:25},type:"bool"},section29Skip1:{byteOffsetInSection:4,length:null,sectionByBuild:{98650:27,262623:28,395070:29},type:"bytes",getLength(e,t){let i=265;return t.includes("(1) Community Patch")&&(i+=8),i}},section29Timer1:{byteOffsetInSection:null,length:null,sectionByBuild:{98650:27,262623:28,395070:29},type:"string"},section29Skip2:{byteOffsetInSection:null,length:12,sectionByBuild:{98650:27,262623:28,395070:29},type:"bytes"},section29TurnTimer:{byteOffsetInSection:null,length:null,sectionByBuild:{98650:27,262623:28,395070:29},type:"string"},section29TxtKeyTurnTimer:{byteOffsetInSection:null,length:null,sectionByBuild:{98650:27,262623:28,395070:29},type:"string"},section29Timer2:{byteOffsetInSection:null,length:null,sectionByBuild:{98650:27,262623:28,395070:29},type:"string"},section29Skip3:{byteOffsetInSection:null,length:25,sectionByBuild:{98650:27,262623:28,395070:29},type:"bytes"},timeVictory:{byteOffsetInSection:null,length:1,sectionByBuild:{98650:27,262623:28,395070:29},type:"bool"},scienceVictory:{byteOffsetInSection:null,length:1,sectionByBuild:{98650:27,262623:28,395070:29},type:"bool"},dominationVictory:{byteOffsetInSection:null,length:1,sectionByBuild:{98650:27,262623:28,395070:29},type:"bool"},culturalVictory:{byteOffsetInSection:null,length:1,sectionByBuild:{98650:27,262623:28,395070:29},type:"bool"},diplomaticVictory:{byteOffsetInSection:null,length:1,sectionByBuild:{98650:27,262623:28,395070:29},type:"bool"},section30Skip1:{byteOffsetInSection:4,length:null,sectionByBuild:{98650:28,262623:29,395070:30},type:"bytes",getLength(e,t){let i=72;return(e.includes("Expansion - Gods and Kings")||e.includes("Expansion - Brave New World"))&&(i+=4),t.includes("(1) Community Patch")&&(i+=8),i}},section30MapSize1:{byteOffsetInSection:null,length:null,sectionByBuild:{98650:28,262623:29,395070:30},type:"string"},section30TxtKeyMapHelp:{byteOffsetInSection:null,length:null,sectionByBuild:{98650:28,262623:29,395070:30},type:"string"},section30Skip2:{byteOffsetInSection:null,length:8,sectionByBuild:{98650:28,262623:29,395070:30},type:"bytes"},section30MapSize2:{byteOffsetInSection:null,length:null,sectionByBuild:{98650:28,262623:29,395070:30},type:"string"},section30TxtKeyMapSize:{byteOffsetInSection:null,length:null,sectionByBuild:{98650:28,262623:29,395070:30},type:"string"},section30MapSize3:{byteOffsetInSection:null,length:null,sectionByBuild:{98650:28,262623:29,395070:30},type:"string"},worldInfo:{byteOffsetInSection:null,length:null,sectionByBuild:{98650:28,262623:29,395070:30},type:"bytes",getLength(e,t){let i=72;return e.includes("Expansion - Brave New World")?i+=8:e.includes("Expansion - Gods and Kings")&&(i+=4),t.includes("(1) Community Patch")&&(i+=20),i}},gameOptionsMap:{byteOffsetInSection:null,length:null,sectionByBuild:{98650:28,262623:29,395070:30},type:"stringToBoolMap"}};class r{constructor(e,t){this.byteOffset=e,this.length=t}}class a extends r{getValue(e){return 1===this.length?Boolean(e.getUint8(this.byteOffset)):4===this.length?Boolean(e.getUint32(this.byteOffset,!0)):void 0}setValue(e,t){1===this.length?e.setUint8(this.byteOffset,Number(t)):4===this.length&&e.setUint32(this.byteOffset,Number(t),!0)}}class l extends r{getValue(e){return 1===this.length?e.getUint8(this.byteOffset):4===this.length?e.getUint32(this.byteOffset,!0):void 0}setValue(e,t){1===this.length?e.setUint8(this.byteOffset,t):4===this.length&&e.setUint32(this.byteOffset,t,!0)}}class o extends r{constructor(e,t,i){super(e,t),this._isNullOrUndefined(this.length)&&(this.length=this._getStringLength(i,this.byteOffset)+4)}_isNullOrUndefined(e){return null==e}_getStringLength(e,t){return e.getUint32(t,!0)}getValue(e){return e.getString(this.byteOffset+4,this.length-4)}}class u{constructor(e,t){if(this.byteOffset=e,this.length=4,this._array=new Array,this._size=new l(this.byteOffset,4,t),this._getSize(t)>0){let e=this.byteOffset+4;for(let i=0;i<this._getSize(t);i++){e+=20;let i=new o(e,null,t);e+=i.length,this._array.push(i.getValue(t))}this.length=e-this.byteOffset}Object.freeze(this._array)}_getSize(e){return this._size.getValue(e)}getArray(){return this._array}}class y{constructor(e,t,i){this.byteOffset=e,this._array=new Array;let n=this.byteOffset;for(let e=0;e<t;e++){let e=new l(n,4,i);n+=e.length,this._array.push(e.getValue(i))}this.length=n-this.byteOffset,Object.freeze(this._array)}getArray(){return this._array}}class h{constructor(e,t){if(this.byteOffset=e,this.length=4,this._array=new Array,this._size=new l(this.byteOffset,4,t),this._getSize(t)>0){let e=this.byteOffset+4;for(let i=0;i<this._getSize(t);i++){e+=new o(e,null,t).length,e+=4;let i=new o(e,null,t);e+=i.length,this._array.push(i.getValue(t))}this.length=e-this.byteOffset}Object.freeze(this._array)}_getSize(e){return this._size.getValue(e)}getArray(){return this._array}}class g{constructor(e,t,i){this.byteOffset=e,this._array=new Array;let n=this.byteOffset;for(let e=0;e<t;e++){let e=new o(n,null,i);n+=e.length,this._array.push(e.getValue(i))}this.length=n-this.byteOffset,Object.freeze(this._array)}getArray(){return this._array}}class c{constructor(e,t){if(this.byteOffset=e,this.length=4,this._items=new Map,this._size=new l(this.byteOffset,4,t),this._getSize(t)>0){let e=this.byteOffset+4;for(let i=0;i<this._getSize(t);i++)e=this._addItemToMap(t,e)}}_addItemToMap(e,t){let i=new o(t,null,e);t+=i.length;let n=new a(t,4,e);return t+=n.length,this._items.set(i.getValue(e),n),this.length=t-this.byteOffset,t}_getSize(e){return this._size.getValue(e)}_setSize(e,t){this._size.setValue(e,t)}getValue(e,t){return!!this._items.has(t)&&this._items.get(t).getValue(e)}setValue(e,t,i){if(!this._items.has(t))return this._addItemToSaveData(e,t,i);this._items.get(t).setValue(e,i)}_addItemToSaveData(e,t,i){this._setSize(e,this._getSize(e)+1);let s=this._int32ToUint8Array(t.length),r=this._stringToUint8Array(t),a=this._int32ToUint8Array(Number(i)),l=this._concatTypedArrays(this._concatTypedArrays(s,r),a),o=this._insertIntoTypedArray(new Uint8Array(e.buffer),l,this.byteOffset+this.length),u=new n(o.buffer);return this._addItemToMap(u,this.byteOffset+this.length),u}_int32ToUint8Array(e){let t=new Uint8Array(4);for(let i=0;i<t.length;i++){let n=255&e;t[i]=n,e=(e-n)/256}return t}_stringToUint8Array(e){let t=new Uint8Array(e.length);for(let i=0;i<e.length;i++)t[i]=e.charCodeAt(i);return t}_concatTypedArrays(e,t){var i=new e.constructor(e.length+t.length);return i.set(e,0),i.set(t,e.length),i}_insertIntoTypedArray(e,t,i){return this._concatTypedArrays(this._concatTypedArrays(e.slice(0,i),t),e.slice(i,e.length))}}class p{static fromType(e,t,i,n){switch(e){case"bool":return new a(t,i);case"bytes":return new r(t,i);case"dlcStringArray":return new u(t,n);case"int":return new l(t,i);case"intArray":return new y(t,i,n);case"modsStringArray":return new h(t,n);case"string":return new o(t,i,n);case"stringArray":return new g(t,i,n);case"stringToBoolMap":return new c(t,n);default:throw new Error(`Property type ${e} not handled`)}}}class _ extends Error{constructor(e){super(e),this.name=this.constructor.name,"function"==typeof Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error(e).stack}}i.d(t,"InvalidSignatureError",(function(){return f})),i.d(t,"ParseError",(function(){return d}));class O{constructor(e){this._saveData=new n(e.buffer),this._verifyFileSignature(),this._properties=this._getProperties()}static async fromFile(e){let t=await O._loadData(e);return new O(t)}static _loadData(e){return new Promise((function(t,i){let n=new FileReader;n.onload=function(){t(new DataView(n.result))},n.onerror=function(){i(n.error)},n.readAsArrayBuffer(e)}))}toBlob(){return new Blob([this._saveData],{type:"application/octet-stream"})}_verifyFileSignature(){if("CIV5"!==this._saveData.getString(0,4))throw new f("File signature does not match. Is this a Civ 5 savegame?")}_getProperties(){let e=null,t=0,i=new Map,n=null,r=null;for(let a in s){"currentTurn"===a&&(this._setGameBuild(i.gameBuild),r=this._getSectionOffsets(this.gameBuild)),"saveGameVersion"===e&&(n=i.saveGameVersion.getValue(this._saveData));let l=Object.assign({},s[a]),o=this._getPropertySection(l,n,this.gameBuild);if(this._isNullOrUndefined(o))continue;let u=l.length;l.hasOwnProperty("getLength")&&(u=l.getLength(i.enabledDLC.getArray(),i.enabledMods.getArray()));let y=0;if(o===t){let t=i[e];y=t.byteOffset+t.length}else null!==e&&(y=r[o-1].start+l.byteOffsetInSection);try{i[a]=p.fromType(l.type,y,u,this._saveData)}catch(e){throw new d(`Failure parsing save at property ${a}`)}e=a,t=o}return i}_getSectionOffsets(e){const t=[64,0,0,0],i=s[Object.keys(s)[Object.keys(s).length-1]],n=i.sectionByBuild[Object.keys(i.sectionByBuild)[Object.keys(i.sectionByBuild).length-1]];let r=new Int8Array(this._saveData.buffer),a=[];a.push({start:0});for(let i=0;i<r.length;i++)if(this._areArraysEqual(r.slice(i,i+4),t)){if(Number(e)<310700){let t=23;if(Number(e)>=262623&&(t=24),a.length===t&&i-a[a.length-1].start<270)continue}let t={start:i};if(a.push(t),a[a.length-2].end=i-1,a.length===n)break}return a}_areArraysEqual(e,t){return e.length===t.length&&e.every((function(e,i){return e===t[i]}))}_getPropertySection(e,t,i){if(e.hasOwnProperty("getSection"))return e.getSection(t);let n=null;for(let t in e.sectionByBuild)Number.parseInt(i)>=Number.parseInt(t)&&(n=e.sectionByBuild[t]);return n}_isNullOrUndefined(e){return null==e}get gameBuild(){try{return this._gameBuild}catch(e){throw new d("Failure parsing save at property gameBuild")}}_getGameBuild(){const e=function(){let e=[];for(let t=0;t<"FINAL_RELEASE".length;t++)e.push("FINAL_RELEASE".charCodeAt(t));return e}();let t=0,i=new Int8Array(this._saveData.buffer);for(let n=0;n<=i.length;n++)if(this._areArraysEqual(i.slice(n,n+e.length),e)){t=n;break}let n="",s=t-2;for(;0!==i.slice(s,s+1)[0];)n=String.fromCharCode(i.slice(s,s+1))+n,s--;return n}_setGameBuild(e){void 0!==e?(this._gameBuild=e.getValue(this._saveData),"180925"===this._gameBuild&&(this._gameBuild="403694")):this._gameBuild=this._getGameBuild()}get gameVersion(){return this._getPropertyIfDefined("gameVersion")}get currentTurn(){return this._getPropertyIfDefined("currentTurn")}get gameMode(){if(Number(this.gameBuild)>=230620)try{return s.gameMode.values[this._properties.gameMode.getValue(this._saveData)]}catch(e){throw new d("Failure parsing save at property gameMode")}}get difficulty(){return this._getBeautifiedPropertyIfDefined("difficulty")}get startingEra(){return this._getBeautifiedPropertyIfDefined("startingEra")}get currentEra(){return this._getBeautifiedPropertyIfDefined("currentEra")}get gamePace(){return this._getBeautifiedPropertyIfDefined("gamePace")}get mapSize(){return this._getBeautifiedPropertyIfDefined("mapSize")}get mapFile(){let e=this._getPropertyIfDefined("mapFile");if(!this._isNullOrUndefined(e))return this._beautifyMapFileValue(e)}get enabledDLC(){if(this._properties.hasOwnProperty("enabledDLC"))try{return this._properties.enabledDLC.getArray()}catch(e){throw new d("Failure parsing save at property enabledDLC")}}get enabledMods(){if(this._properties.hasOwnProperty("enabledMods"))try{return this._properties.enabledMods.getArray()}catch(e){throw new d("Failure parsing save at property enabledMods")}}get players(){if(this._isNullOrUndefined(this._players)){this._players=new Array;let e=this._properties.playerStatuses.getArray();for(let t=0;t<e.length;t++){let i=new Object;if(i.status=s.playerStatuses.values[e[t]],i.status===O.PLAYER_STATUSES.NONE)break;if(this._properties.hasOwnProperty("playerCivilizations")){if(""===this._properties.playerCivilizations.getArray()[t])break;i.civilization=this._beautifyPropertyValue(this._properties.playerCivilizations.getArray()[t])}else if(0===t&&this._properties.hasOwnProperty("player1Civilization"))try{i.civilization=this._beautifyPropertyValue(this._properties.player1Civilization.getValue(this._saveData))}catch(e){throw new d("Failure parsing save at property players")}this._players.push(i)}}return this._players}get maxTurns(){return this._getPropertyIfDefined("maxTurns")}set maxTurns(e){this._properties.maxTurns.setValue(this._saveData,e)}get turnTimerLength(){return this._getPropertyIfDefined("turnTimerLength")}set turnTimerLength(e){this._properties.turnTimerLength.setValue(this._saveData,e)}get privateGame(){return this._getPropertyIfDefined("privateGame")}set privateGame(e){this._properties.privateGame.setValue(this._saveData,e)}get timeVictory(){return this._getPropertyIfDefined("timeVictory")}set timeVictory(e){this._properties.timeVictory.setValue(this._saveData,e)}get scienceVictory(){return this._getPropertyIfDefined("scienceVictory")}set scienceVictory(e){this._properties.scienceVictory.setValue(this._saveData,e)}get dominationVictory(){return this._getPropertyIfDefined("dominationVictory")}set dominationVictory(e){this._properties.dominationVictory.setValue(this._saveData,e)}get culturalVictory(){return this._getPropertyIfDefined("culturalVictory")}set culturalVictory(e){this._properties.culturalVictory.setValue(this._saveData,e)}get diplomaticVictory(){return this._getPropertyIfDefined("diplomaticVictory")}set diplomaticVictory(e){this._properties.diplomaticVictory.setValue(this._saveData,e)}get alwaysPeace(){return this._getGameOption("GAMEOPTION_ALWAYS_PEACE")}set alwaysPeace(e){this._setGameOption("GAMEOPTION_ALWAYS_PEACE",e)}get alwaysWar(){return this._getGameOption("GAMEOPTION_ALWAYS_WAR")}set alwaysWar(e){this._setGameOption("GAMEOPTION_ALWAYS_WAR",e)}get completeKills(){return this._getGameOption("GAMEOPTION_COMPLETE_KILLS")}set completeKills(e){this._setGameOption("GAMEOPTION_COMPLETE_KILLS",e)}get lockMods(){return this._getGameOption("GAMEOPTION_LOCK_MODS")}set lockMods(e){this._setGameOption("GAMEOPTION_LOCK_MODS",e)}get newRandomSeed(){return this._getGameOption("GAMEOPTION_NEW_RANDOM_SEED")}set newRandomSeed(e){this._setGameOption("GAMEOPTION_NEW_RANDOM_SEED",e)}get noBarbarians(){return this._getGameOption("GAMEOPTION_NO_BARBARIANS")}set noBarbarians(e){this._setGameOption("GAMEOPTION_NO_BARBARIANS",e)}get noChangingWarPeace(){return this._getGameOption("GAMEOPTION_NO_CHANGING_WAR_PEACE")}set noChangingWarPeace(e){this._setGameOption("GAMEOPTION_NO_CHANGING_WAR_PEACE",e)}get noCityRazing(){return this._getGameOption("GAMEOPTION_NO_CITY_RAZING")}set noCityRazing(e){this._setGameOption("GAMEOPTION_NO_CITY_RAZING",e)}get noCultureOverviewUI(){return this._getGameOption("GAMEOPTION_NO_CULTURE_OVERVIEW_UI")}set noCultureOverviewUI(e){this._setGameOption("GAMEOPTION_NO_CULTURE_OVERVIEW_UI",e)}get noEspionage(){return this._getGameOption("GAMEOPTION_NO_ESPIONAGE")}set noEspionage(e){this._setGameOption("GAMEOPTION_NO_ESPIONAGE",e)}get noHappiness(){return this._getGameOption("GAMEOPTION_NO_HAPPINESS")}set noHappiness(e){this._setGameOption("GAMEOPTION_NO_HAPPINESS",e)}get noPolicies(){return this._getGameOption("GAMEOPTION_NO_POLICIES")}set noPolicies(e){this._setGameOption("GAMEOPTION_NO_POLICIES",e)}get noReligion(){return this._getGameOption("GAMEOPTION_NO_RELIGION")}set noReligion(e){this._setGameOption("GAMEOPTION_NO_RELIGION",e)}get noScience(){return this._getGameOption("GAMEOPTION_NO_SCIENCE")}set noScience(e){this._setGameOption("GAMEOPTION_NO_SCIENCE",e)}get noWorldCongress(){return this._getGameOption("GAMEOPTION_NO_LEAGUES")}set noWorldCongress(e){this._setGameOption("GAMEOPTION_NO_LEAGUES",e)}get oneCityChallenge(){return this._getGameOption("GAMEOPTION_ONE_CITY_CHALLENGE")}set oneCityChallenge(e){this._setGameOption("GAMEOPTION_ONE_CITY_CHALLENGE",e)}get pitboss(){return this._getGameOption("GAMEOPTION_PITBOSS")}set pitboss(e){this._setGameOption("GAMEOPTION_PITBOSS",e)}get policySaving(){return this._getGameOption("GAMEOPTION_POLICY_SAVING")}set policySaving(e){this._setGameOption("GAMEOPTION_POLICY_SAVING",e)}get promotionSaving(){return this._getGameOption("GAMEOPTION_PROMOTION_SAVING")}set promotionSaving(e){this._setGameOption("GAMEOPTION_PROMOTION_SAVING",e)}get ragingBarbarians(){return this._getGameOption("GAMEOPTION_RAGING_BARBARIANS")}set ragingBarbarians(e){this._setGameOption("GAMEOPTION_RAGING_BARBARIANS",e)}get randomPersonalities(){return this._getGameOption("GAMEOPTION_RANDOM_PERSONALITIES")}set randomPersonalities(e){this._setGameOption("GAMEOPTION_RANDOM_PERSONALITIES",e)}get turnTimerEnabled(){return this._getGameOption("GAMEOPTION_END_TURN_TIMER_ENABLED")}set turnTimerEnabled(e){this._setGameOption("GAMEOPTION_END_TURN_TIMER_ENABLED",e)}get turnMode(){return!0===this._getGameOption("GAMEOPTION_DYNAMIC_TURNS")?O.TURN_MODES.HYBRID:!0===this._getGameOption("GAMEOPTION_SIMULTANEOUS_TURNS")?O.TURN_MODES.SIMULTANEOUS:!1===this._getGameOption("GAMEOPTION_DYNAMIC_TURNS")&&!1===this._getGameOption("GAMEOPTION_SIMULTANEOUS_TURNS")?O.TURN_MODES.SEQUENTIAL:void 0}set turnMode(e){e===O.TURN_MODES.HYBRID?(this._setGameOption("GAMEOPTION_DYNAMIC_TURNS",!0),this._setGameOption("GAMEOPTION_SIMULTANEOUS_TURNS",!1)):e===O.TURN_MODES.SIMULTANEOUS?(this._setGameOption("GAMEOPTION_DYNAMIC_TURNS",!1),this._setGameOption("GAMEOPTION_SIMULTANEOUS_TURNS",!0)):e===O.TURN_MODES.SEQUENTIAL&&(this._setGameOption("GAMEOPTION_DYNAMIC_TURNS",!1),this._setGameOption("GAMEOPTION_SIMULTANEOUS_TURNS",!1))}_getPropertyIfDefined(e){if(this._properties.hasOwnProperty(e))try{return this._properties[e].getValue(this._saveData)}catch(t){throw new d(`Failure parsing save at property ${e}`)}}_getBeautifiedPropertyIfDefined(e){if(this._properties.hasOwnProperty(e))try{return this._beautifyPropertyValue(this._properties[e].getValue(this._saveData))}catch(t){throw new d(`Failure parsing save at property ${e}`)}}_beautifyPropertyValue(e){return e=(e=(e=e.split("_")[1]).toLowerCase()).charAt(0).toUpperCase()+e.slice(1)}_beautifyMapFileValue(e){return e=(e=(e=(e=e.split("/").slice(-1)[0]).split("\\").slice(-1)[0]).substring(0,e.lastIndexOf("."))).replace(/_/g," ")}_getGameOption(e){try{return this._properties.gameOptionsMap.getValue(this._saveData,e)}catch(t){throw new d(`Failure parsing save at property ${e}`)}}_setGameOption(e,t){let i=this._properties.gameOptionsMap.setValue(this._saveData,e,t);this._isNullOrUndefined(i)||(this._saveData=i)}}O.GAME_MODES={SINGLE:"Single player",MULTI:"Multiplayer",HOTSEAT:"Hotseat"},O.PLAYER_STATUSES={AI:"AI",DEAD:"Dead",HUMAN:"Human",NONE:"None"},O.TURN_MODES={HYBRID:"Hybrid",SEQUENTIAL:"Sequential",SIMULTANEOUS:"Simultaneous"};t.default=O;class f extends _{}class d extends _{}}])}));